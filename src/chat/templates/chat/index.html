<!-- chat/templates/chat/index.html -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Chat Rooms</title>
</head>
<body>
    What chat room would you like to enter?<br/>
    {% for friend in friends %}
        {% if friend.sender != user.profile %}
            <input type="hidden" id = "{{friend.sender}}" value = "{{friend.slug}}">
            <input id="room-name-input" type="button" value = "{{friend.sender}}"/><br/>
        {% else %}
            <input type="hidden" id = "{{friend.receiver}}" value = "{{friend.slug}}" >
            <input id="room-name-input" type="button" value = "{{friend.receiver}}"/><br/>
        {% endif %}
        
    {% endfor %}
    <!--
    <input id="room-name-submit" type="button" value="Enter"/>
    -->
    <script>
        //document.querySelector('#room-name-input').focus();
        //document.querySelector('#room-name-input').onkeyup = function(e) {
        //    if (e.keyCode === 13) {  // enter, return
        //        document.querySelector('#room-name-submit').click();
        //    }
        //}; 

        const friendBtn = document.querySelectorAll('#room-name-input');
        friendBtn.forEach((item) => {item.addEventListener('click' ,function(e) {
            var roomName = document.querySelector('#'+item.value).value;
            window.location.pathname = '/chat/' + roomName + '/';
        })})


        
    </script>
</body>
</html>